version: 1

indices:
  default:
    include:
      - /**
    exclude:
      - /drafts/**
      - /fragments/**
      - /tools/**
      - /blocks/**
      - /_*.json
    target: /query-index.json
    conditions:
      branch:
        - main
        - ${branch}
    properties:
      # Basic metadata
      title:
        select: meta[property="og:title"]
        value: attribute(el, "content")
      lastModified:
        select: none
        value: parseTimestamp(headers["last-modified"], "ddd, DD MMM YYYY hh:mm:ss GMT")
      robots:
        select: meta[name="robots"]
        value: attribute(el, "content")
      description:
        select: meta[name="description"]
        value: attribute(el, "content")
      image:
        select: meta[property="og:image"]
        value: attribute(el, "content")

      # Block content
      # 1. Cards
      cardsText:
        select: .cards-card-body
        value: textContent(el)
      cardsImage:
        select: .cards-card-image img
        value: attribute(el, "src")

      # 2. Columns
      columnsContent:
        select: .columns-img-col
        value: textContent(el)

      # 3. Core Principles
      corePrinciplesTitle:
        select: div[data-aue-model="coreprinciple"] [data-aue-prop="title"]
        value: textContent(el)
      corePrinciplesDescription:
        select: div[data-aue-model="coreprinciple"] [data-richtext-prop="description"]
        value: textContent(el)
      corePrinciplesImage:
        select: div[data-aue-model="coreprinciple"] a
        value: textContent(el)

      # 4. Enquiry
      enquiryHeading:
        select: div[data-aue-model="enquiry"] [data-aue-prop="heading"]
        value: textContent(el)
      enquiryDescription:
        select: div[data-aue-model="enquiry"] [data-richtext-prop="description"]
        value: textContent(el)
      enquiryPhone:
        select: div[data-aue-model="enquiry"] [data-aue-prop="phoneNumber"]
        value: textContent(el)
      enquiryEmail:
        select: div[data-aue-model="enquiry"] [data-aue-prop="emailAddress"]
        value: textContent(el)
      enquiryAddress:
        select: div[data-aue-model="enquiry"] [data-aue-prop="address"]
        value: textContent(el)

      # 5. Explore More
      exploreModeTitle:
        select: .exploremore [data-aue-prop="title"]
        value: textContent(el)
      exploreModeFirstCta:
        select: .exploremore [data-aue-prop="firstCtaCaption"]
        value: textContent(el)
      exploreModeSecondCta:
        select: .exploremore [data-aue-prop="secondCtaCaption"]
        value: textContent(el)

      # 6. Feature
      featureTitle:
        select: div[data-aue-model="feature"] [data-aue-prop="title"]
        value: textContent(el)
      featureHeading:
        select: div[data-aue-model="feature"] [data-aue-prop="heading"]
        value: textContent(el)
      featureSubHeading:
        select: div[data-aue-model="feature"] [data-richtext-prop="sub-heading"]
        value: textContent(el)
      featureItemTitle:
        select: div[data-aue-model="featureItem"] [data-richtext-prop="feature-title"]
        value: textContent(el)
      featureItemHeading:
        select: div[data-aue-model="featureItem"] [data-aue-prop="feature-heading"]
        value: textContent(el)
      featureStatistic:
        select: div[data-aue-model="featureItem"] .statistic
        value: textContent(el)

      # 7. Footer
      footerDescription:
        select: .footer [data-richtext-prop="description"]
        value: textContent(el)
      footerLinks:
        select: .footer .nav-sections a
        value: textContent(el)

      # 8. Fragment
      fragmentReference:
        select: .fragment [data-aue-prop="reference"]
        value: textContent(el)

      # 9. Header
      headerLinks:
        select: .nav-wrapper .nav-sections a
        value: textContent(el)

      # 10. Hero
      heroText:
        select: .hero [data-richtext-prop="text"]
        value: textContent(el)
      heroImage:
        select: .hero picture img
        value: attribute(el, "src")

      # 11. Hero Banner
      heroBannerHeading:
        select: div[data-aue-model="herobanner"] [data-aue-prop="bannerheading"]
        value: textContent(el)
      heroBannerTitle:
        select: div[data-aue-model="herobanner"] [data-aue-prop="bannertitle"]
        value: textContent(el)
      heroBannerDescription:
        select: div[data-aue-model="herobanner"] [data-richtext-prop="bannerdescription"]
        value: textContent(el)
      heroBannerImage:
        select: div[data-aue-model="herobanner"] a
        value: textContent(el)

      # 12. Listing
      listingTitle:
        select: div[data-aue-model="listing"] [data-aue-prop="title"]
        value: textContent(el)
      listingHeading:
        select: div[data-aue-model="listing"] [data-aue-prop="heading"]
        value: textContent(el)
      listingItemTitle:
        select: div[data-aue-model="listitem"] [data-aue-prop="title"]
        value: textContent(el)
      listingItemDescription:
        select: div[data-aue-model="listitem"] [data-aue-prop="description"]
        value: textContent(el)

      # 13. Project Cards
      projectCardsTitle:
        select: div[data-aue-model="projectcards"] [data-aue-prop="title"]
        value: textContent(el)
      projectCardsHeading:
        select: div[data-aue-model="projectcards"] [data-aue-prop="heading"]
        value: textContent(el)
      projectCardsDescription:
        select: div[data-aue-model="projectcards"] [data-richtext-prop="description"]
        value: textContent(el)
      projectCardTitle:
        select: div[data-aue-model="projectcard"] [data-aue-prop="title"]
        value: textContent(el)
      projectCardLocation:
        select: div[data-aue-model="projectcard"] [data-aue-prop="location"]
        value: textContent(el)
      projectCardImage:
        select: div[data-aue-model="projectcard"] a
        value: textContent(el)

      # 14. Text Media Block
      textMediaBlockHeading:
        select: div[data-aue-model="textmediablock"] [data-aue-prop="heading"]
        value: textContent(el)
      textMediaBlockDescription:
        select: div[data-aue-model="textmediablock"] [data-richtext-prop="description"]
        value: textContent(el)
      textMediaBlockImage:
        select: div[data-aue-model="media"] a
        value: textContent(el)

      # 15. Text Section
      textSectionHeading:
        select: div[data-aue-model="textsection"] [data-aue-prop="heading"]
        value: textContent(el)
      textSectionDescription:
        select: div[data-aue-model="textsection"] [data-richtext-prop="description"]
        value: textContent(el)

      # 16. Tiles
      tilesHeading:
        select: div[data-aue-model="tile"] [data-aue-prop="heading"]
        value: textContent(el)
      tilesDescription:
        select: div[data-aue-model="tile"] [data-richtext-prop="description"]
        value: textContent(el)
      tilesImage:
        select: div[data-aue-model="tile"] a
        value: textContent(el)
      tilesCta:
        select: div[data-aue-model="tile"] [data-aue-prop="ctaCaption"]
        value: textContent(el)